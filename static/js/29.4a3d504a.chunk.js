(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1282:function(e,t,a){},1800:function(e,t,a){},1851:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(526),c=a(70),l=(a(1282),a(442)),o=a.n(l),i=a(31),u=a(32),d=a(34),p=a(33),g=a(124),m=a(35),f=a(108),h=a(22),v=a(15),y=a(1256),b=a.n(y),E=a(71),w=a(39),x=a(1376),S=a(1844),j=a(1378),k=a(1824),F=a(590),O=a(647),V=a(1826),N=a(420),C=a(531),T=a(433),L=a(1517),P=a(412),q=a(128),I=a(440),_=a(472);function A(){var e=Object(f.a)(["\n    animation: "," "," ",";\n  "]);return A=function(){return e},e}function B(){var e=Object(f.a)(["\n  from {\n    filter: blur(5px);\n    opacity: 0;\n  }\n\n  to {\n    filter: blur(0);\n    opacity: 1;\n  }\n"]);return B=function(){return e},e}var D=Object(E.d)(B());a(1800);function U(){var e=Object(f.a)(["\n  ","\n  max-width: 100%;\n  height: auto;\n"]);return U=function(){return e},e}function z(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n"]);return z=function(){return e},e}function R(){var e=Object(f.a)(["\n  max-width: 100%;\n  max-height: 100%;\n"]);return R=function(){return e},e}function J(){var e=Object(f.a)(["\n  width: 100%;\n  ",";\n"]);return J=function(){return e},e}function M(){var e=Object(f.a)(["\n  margin-bottom: 5px !important;\n  & {\n    .ant-form-item-label {\n      line-height: 20px;\n    }\n    .ant-form-explain {\n      color: #0f416a;\n    }\n  }\n"]);return M=function(){return e},e}var H=a(671).default,G=x.a.Dragger,K=S.a.Item,Q=j.a.Option,W=Object(E.c)(K)(M()),X=E.c.div(J(),function(e){return e.error?"  border: 2px dashed #ea2020":null}),Y=E.c.div(R()),Z=E.c.div(z()),$=Object(E.c)(b.a)(U(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.time,a=void 0===t?"0.5s":t,n=e.type,r=void 0===n?"ease":n;return Object(E.b)(A(),a,D,r)}()),ee=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},te=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={allowedFiles:"",showBilling:"0",secret:null,process:[],fileList:[],uploading:!1,visible:!1,payVisible:!1,processEnd:!1,showError:!1,source:null,target:null,viewNoty:"process",loading:!1,engines:[],defaultValue:[],defaultSourceValue:null,defaultTargetValue:null,selected:{engines:[]},formValues:{name:"",address:"",country:"ES",vattax:""},current:0,processSelected:null,loadingPay:!1,applyTax:!1},a.componentDidMount=function(){a.getEngines()},a.getEngines=function(){var e;return o.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return a.setState({loading:!0}),t.prev=1,t.next=4,o.a.awrap(Object(I.I)());case 4:(e=t.sent).data.process&&e.data.process.length&&(a.setState({engines:e.data.process,allowedFiles:e.data.allowedFiles,defaultValue:ee(e.data.value)}),a.initSelected(e.data.value,e.data.process)),a.setState({loading:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a.setState({loading:!1});case 12:case"end":return t.stop()}},null,null,[[1,9]])},a.getProcess=function(){var e,t,n,r,s;return o.a.async(function(c){for(;;)switch(c.prev=c.next){case 0:e=Object(g.a)(a),t=a.props,n=t.history,r=t.processAct.setProcessSelected,s=setInterval(function(){var t,a;return o.a.async(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,o.a.awrap(Object(I.V)({secret:e.state.secret}));case 2:t=c.sent,a=0,t.data.length&&"quote_ready"===t.data[0].status&&(r(t.data[0]),e.setState({process:t.data,payVisible:!0}),n.push("/main/process/pay"),clearInterval(s)),a>60&&(n.push("/main"),clearInterval(s)),a++;case 7:case"end":return c.stop()}})},1e3);case 3:case"end":return c.stop()}})},a.handleSubmit=function(e){e.preventDefault();var t=a.props.intl.messages,n=a.state,r=n.target,s=n.fileList,c=n.selected,l=a.getTargets().filter(function(e){if(e&&e.key===r)return e})[0];l&&a.setState({target:r,showError:!1,viewNoty:"process",current:0,formValues:{name:"",address:"",country:"ES",vattax:""},applyTax:!1}),a.props.form.validateFields(function(e,n){if(!e)if(s.length){var r=s.map(function(e){return _.a.getBase64(e.originFileObj)}),o=Math.random().toString(36).slice(-8);a.setState({secret:o}),Promise.all(r).then(function(e){var r=n.target.split("-"),s={secret:o,process:{id:r[0],name:c.name},engine:l,source:{id:r[0],name:c.name},files:e,email:n.email};a.setState({uploading:!0}),Object(I.tb)(s).then(function(){k.a.success(t.default.success),a.setState({uploading:!1,viewNoty:"success",fileList:[]}),a.getProcess()}).catch(function(e){k.a.error(e.message),a.setState({uploading:!1,viewNoty:"error"})})}).catch(function(e){k.a.error(e.message)})}else a.setState({showError:!0})})},a.handleChange=function(e){var t=null,n=[];a.state.engines.forEach(function(n){n.name===e.toLowerCase()&&(a.setState({selected:n}),t=n)}),t&&t.engines&&t.engines.length&&(t.engines.forEach(function(e){for(var t=!1,a=0;a<n.length;a++)if(n[a].key===e.source){t=!0;break}if(!t){var r=e.source;n.push({key:r,id:e.id,name:_.a.languages[r],target:e.target,source:e.source})}}),n.length&&a.setState({defaultSourceValue:n[0].name,source:n[0].source,target:"".concat(n[0].id,"-").concat(n[0].target),defaultTargetValue:a.getTargets(t.engines,n[0].source)[0].name}))},a.initSelected=function(e,t){for(var n=null,r=[],s=Object(g.a)(a),c=0;c<t.length;c++)if(t[c].name===e){s.setState({selected:t[c]}),n=t[c];break}n&&n.engines&&n.engines.length&&(n.engines.forEach(function(e){for(var t=!1,a=0;a<r.length;a++)if(r[a].key===e.source){t=!0;break}if(!t){var n=e.source;r.push({key:n,id:e.id,name:_.a.languages[n],target:e.target,source:e.source})}}),r.length&&a.setState({defaultSourceValue:r[0].name,source:r[0].source,target:"".concat(r[0].id,"-").concat(r[0].target),defaultTargetValue:a.getTargets(n.engines,r[0].source)[0].text}))},a.changeSource=function(e){a.setState({source:e})},a.changeTarget=function(e){a.setState({target:e})},a.getSources=function(){var e=a.state.selected,t=[];return e.engines&&e.engines.length&&e.engines.forEach(function(e){for(var a=!1,n=0;n<t.length;n++)if(t[n].key===e.source){a=!0;break}if(!a){var r=e.source;t.push({key:r,name:_.a.languages[r]})}}),t},a.getTargets=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=a.state,r=n.selected,s=n.source;e||(e=r.engines),t||(t=s);var c=[];return e.forEach(function(e){for(var a=!1,n=0;n<c.length;n++)if(c[n].key===e.target){a=!0;break}t&&(a||e.source!==t||(e.domain?(e.key="".concat(e.id,"-").concat(e.target),e.text="".concat(_.a.languages[e.target]," - ").concat(e.name," - ").concat(e.domain)):(e.key="".concat(e.id,"-").concat(e.target),e.text="".concat(_.a.languages[e.target]," - ").concat(e.name)),c.push(e)))}),c},a.renderForms=function(){var e=a.props.intl.messages,t=a.state,n=t.allowedFiles,s=t.engines,c=t.loading,l=t.fileList,o=t.showError,i=t.defaultValue,u=t.source,d=t.processEnd,p=t.defaultSourceValue,g=t.defaultTargetValue,m=t.selected,f=t.uploading,h=t.target,v=a.props.form,y=v.getFieldDecorator,b=v.getFieldsError,E={beforeUpload:function(t){var a=t.size/1024/1024<500;return _.a.checkFile(t,n)?a||k.a.error(e.process.error.uploadTwo):k.a.error(e.process.error.uploadOne.replace("allowedFiles",n)),!1},onChange:function(e){var t=[];e.fileList.map(function(e){return _.a.checkFile(e,n)&&t.push(e),t}),a.setState({fileList:t})},multiple:!1,fileList:l,showUploadList:!0},w=[];return s.length&&(w=s.map(function(e){return r.a.createElement(Q,{key:e.id,value:e.name.replace(/^\w/,function(e){return e.toUpperCase()})},e.name.replace(/^\w/,function(e){return e.toUpperCase()}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:a.handleSubmit}),r.a.createElement(F.a,{type:"flex",justify:"center",align:"middle"},r.a.createElement(O.a,{xs:24},r.a.createElement(W,{wrapperCol:{xs:{span:24,offset:0},sm:{span:24,offset:0}}},r.a.createElement(X,{error:o&&!l.length},r.a.createElement(V.a,{style:{cursor:"pointer"},count:l.length},r.a.createElement(G,E,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(N.a,{type:"inbox"})),r.a.createElement("p",{className:"ant-upload-text"},e.process.drag))),o&&!l.length?k.a.error(e.process.alert):null))),r.a.createElement(O.a,{xs:24},r.a.createElement(W,{validateStatus:c?"validating":"",label:e.process.process,hasFeedback:!0},y("process",{initialValue:i,disabled:null===u||d,rules:[{required:!0,message:e.process.rules.process.required}]})(r.a.createElement(j.a,{autofocus:"true",onChange:a.handleChange},w)))),r.a.createElement(O.a,{xs:24},r.a.createElement(W,{label:e.process.source,hasFeedback:!0},y("source",{initialValue:p,rules:[{required:!0,message:e.process.rules.source.required}]})(r.a.createElement(j.a,{disabled:!a.getSources().length,onChange:a.changeSource},a.getSources().map(function(e){return r.a.createElement(Q,{key:e.key},e.name)})))),r.a.createElement(W,{label:e.process.target,hasFeedback:!0},y("target",{initialValue:g,rules:[{required:!0,message:e.process.rules.target.required}]})(r.a.createElement(j.a,{onChange:a.changeTarget,disabled:null===u||d},a.getTargets().map(function(e){return r.a.createElement(Q,{key:e.key,value:e.key},e.text)})))),r.a.createElement(W,{label:e.process.notification,hasFeedback:!0,help:e.process.notificationHelp},y("email",{disabled:d,rules:[{type:"email",message:e.process.rules.email.type},{required:!0,message:e.process.rules.email.required}]})(r.a.createElement(C.a,{disabled:!m.engines.length})))),r.a.createElement(O.a,{xs:24},r.a.createElement(W,{style:{display:"flex",justifyContent:"center",marginBottom:0}},d?null:r.a.createElement(F.a,{justify:"center",type:"flex"},r.a.createElement(T.a,{style:{marginTop:10},icon:"upload",type:"primary",htmlType:"submit",size:"large",loading:f,disabled:!a.getSources().length||!h||!u||!a.props.form.getFieldValue("email")||!a.props.form.getFieldValue("email").length||_.a.hasErrors(b())},f?e.process.uploading:e.process.uploadingLoad)))))))},a.showListFile=function(){a.state.fileList.length&&a.setState({visible:!0})},a.hideListFile=function(){a.setState({visible:!1})},a.setViewNoty=function(e){a.setState({viewNoty:e})},a.onRemove=function(e){var t=a.state,n=t.processEnd,r=t.fileList;if(!n){var s=[];r.map(function(t){return t.uid!==e.uid&&s.push(t),s}),s.length||a.hideListFile(),a.setState({fileList:s})}},a.onRadioChange=function(e){a.setState({showBilling:e.target.value})},a.pay=function(e){return o.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:a.setState({loadingPay:e}),document.getElementById(e).submit();case 2:case"end":return t.stop()}})},a.calculatePrice=function(e){var t=a.state.applyTax,n=e.toFixed(2);if("0.00"===n&&(n="0.01"),t){var r=(21*parseFloat(n)/100).toFixed(2);n=parseFloat(n)+parseFloat(r)}return n},a.handleChange=function(e){var t=a.state.formValues;t.country=e,a.setState({formValues:t})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"next",value:function(){var e=this;if(1===this.state.current){this.props.form.validateFields(function(t,a){if(!t){var n=e.state.current+1;H[a.country].continent,a.continent=H[a.country].continent,e.setState({current:n,formValues:a,applyTax:!0})}})}else{var t=1;0===this.state.current&&"2"===this.state.showBilling&&(t=2);var a=this.state.current+t;this.setState({current:a})}}},{key:"prev",value:function(){var e=1;2===this.state.current&&"2"===this.state.showBilling&&(e=2);var t=this.state.current-e;this.setState({current:t})}},{key:"render",value:function(){var e=this,t=this.props.intl.messages,a=this.state.viewNoty;return"process"===a?this.renderForms():"error"===a?r.a.createElement("div",{style:{justifyContent:"center"},className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-sm-8 col-8 p-4"},r.a.createElement($,{src:"".concat("","/images/undraw_bug_fixing_oc7a.svg"),loading:function(){return r.a.createElement("div",null,t.process.loading,"...")},error:function(){return r.a.createElement("div",null,"Error")}}),r.a.createElement("h2",null,t.process.errorProcess),r.a.createElement("p",null,t.process.errorProcessSub),r.a.createElement(L.a,null),r.a.createElement(Z,null,r.a.createElement(T.a,{onClick:function(){e.setViewNoty("process")},type:"primary",size:"large"},t.process.tryAgain)))):"success"===a?r.a.createElement("div",{style:{justifyContent:"center"},className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-sm-8 col-8 p-4"},r.a.createElement($,{src:"".concat("","/images/undraw_confirmation_2uy0.svg"),loading:function(){return r.a.createElement("div",null,r.a.createElement(Y,null))},error:function(){return r.a.createElement("div",null,"Error")}}),r.a.createElement("h2",null,r.a.createElement(P.a,{size:"large"})," \xa0 ",t.process.processing))):void 0}}]),t}(r.a.Component);var ae=Object(h.c)(function(e){return{process:e.rootReducer.process}},function(e){return{processAct:Object(v.a)(q,e)}})(S.a.create()(Object(c.c)(Object(w.g)(te)))),ne=function(e){var t=e.selectProcess,a=e.process,n=e.changeFileID;return r.a.createElement(ae,{changeFileID:n,process:a,selectProcess:function(e){t(e)}})};t.default=Object(c.c)(function(e){var t=e.intl.messages;return r.a.createElement(s.a,{type:"bottom",className:"ui-animate"},r.a.createElement("div",{key:"1",className:"row justify-content-md-center"},r.a.createElement("div",{className:"form-card__body col-md-6 p-4"},r.a.createElement("article",{className:"article"},r.a.createElement("div",{className:"box box-default"},r.a.createElement("div",{className:"box-body p-4"},r.a.createElement("section",{className:"form-v1-container"},r.a.createElement("h2",null," ",t.process.processAFile),r.a.createElement("p",{className:"lead col-lg-10 mx-lg-auto"},t.process.subProcessAFile),r.a.createElement("p",null,"(docx | xlsx | pptx | pdf | odt | odp)"),r.a.createElement(ne,null))))))))})}}]);
//# sourceMappingURL=29.4a3d504a.chunk.js.map