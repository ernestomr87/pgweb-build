(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1150:function(e,t,a){},1384:function(e,t,a){},1423:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(538),c=a(70),o=(a(1150),a(439)),l=a.n(o),i=a(440),u=a(34),p=a(35),d=a(38),g=a(36),m=a(129),f=a(37),h=a(108),v=a(25),b=a(15),y=a(1148),E=a.n(y),w=a(71),x=a(39),S=a(1201),j=a(1415),k=a(464),O=a(1399),F=a(580),V=a(630),N=a(1403),C=a(409),T=a(545),L=a(427),P=a(1240),q=a(402),_=a(131),A=a(436),B=a(494);function I(){var e=Object(h.a)(["\n    animation: "," "," ",";\n  "]);return I=function(){return e},e}function D(){var e=Object(h.a)(["\n  from {\n    filter: blur(5px);\n    opacity: 0;\n  }\n\n  to {\n    filter: blur(0);\n    opacity: 1;\n  }\n"]);return D=function(){return e},e}var U=Object(w.d)(D());a(1384);function z(){var e=Object(h.a)(["\n  ","\n  max-width: 100%;\n  height: auto;\n"]);return z=function(){return e},e}function R(){var e=Object(h.a)(["\n  display: flex;\n  justify-content: center;\n"]);return R=function(){return e},e}function H(){var e=Object(h.a)(["\n  max-width: 100%;\n  max-height: 100%;\n"]);return H=function(){return e},e}function J(){var e=Object(h.a)(["\n  width: 100%;\n  ",";\n"]);return J=function(){return e},e}function M(){var e=Object(h.a)(["\n  margin-bottom: 5px !important;\n  & {\n    .ant-form-item-label {\n      line-height: 20px;\n    }\n    .ant-form-explain {\n      color: #0f416a;\n    }\n  }\n"]);return M=function(){return e},e}var G=a(631).default,K=S.a.Dragger,Q=j.a.Item,W=k.a.Option,X=Object(w.c)(Q)(M()),Y=w.c.div(J(),function(e){return e.error?"  border: 2px dashed #ea2020":null}),Z=w.c.div(H()),$=w.c.div(R()),ee=Object(w.c)(E.a)(z(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.time,a=void 0===t?"0.5s":t,n=e.type,r=void 0===n?"ease":n;return Object(w.b)(I(),a,U,r)}()),te=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},ae=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={allowedFiles:"",showBilling:"0",secret:null,process:[],fileList:[],uploading:!1,visible:!1,payVisible:!1,processEnd:!1,showError:!1,source:null,target:null,viewNoty:"process",loading:!1,engines:[],defaultValue:[],defaultSourceValue:null,defaultTargetValue:null,selected:{engines:[]},formValues:{name:"",address:"",country:"ES",vattax:""},current:0,processSelected:null,loadingPay:!1,applyTax:!1},a.componentDidMount=function(){a.getEngines()},a.getEngines=Object(i.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.prev=1,e.next=4,Object(A.H)();case 4:(t=e.sent).data.process&&t.data.process.length&&(a.setState({engines:t.data.process,allowedFiles:t.data.allowedFiles,defaultValue:te(t.data.value)}),a.initSelected(t.data.value,t.data.process)),a.setState({loading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a.setState({loading:!1});case 12:case"end":return e.stop()}},e,null,[[1,9]])})),a.getProcess=Object(i.a)(l.a.mark(function e(){var t,n,r,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(m.a)(a),n=a.props,r=n.history,s=n.processAct.setProcessSelected,c=setInterval(Object(i.a)(l.a.mark(function e(){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.U)({secret:t.state.secret});case 2:a=e.sent,n=0,a.data.length&&"quote_ready"===a.data[0].status&&(s(a.data[0]),t.setState({process:a.data,payVisible:!0}),r.push("/main/process/pay"),clearInterval(c)),n>60&&(r.push("/main"),clearInterval(c)),n++;case 7:case"end":return e.stop()}},e)})),1e3);case 3:case"end":return e.stop()}},e)})),a.handleSubmit=function(e){e.preventDefault();var t=a.props.intl.messages,n=a.state,r=n.target,s=n.fileList,c=n.selected,o=a.getTargets().filter(function(e){if(e&&e.key===r)return e})[0];o&&a.setState({target:r,showError:!1,viewNoty:"process",current:0,formValues:{name:"",address:"",country:"ES",vattax:""},applyTax:!1}),a.props.form.validateFields(function(e,n){if(!e)if(s.length){var r=s.map(function(e){return B.a.getBase64(e.originFileObj)}),l=Math.random().toString(36).slice(-8);a.setState({secret:l}),Promise.all(r).then(function(e){var r=n.target.split("-"),s={secret:l,process:{id:r[0],name:c.name},engine:o,source:{id:r[0],name:c.name},files:e,email:n.email};a.setState({uploading:!0}),Object(A.rb)(s).then(function(){O.a.success(t.default.success),a.setState({uploading:!1,viewNoty:"success",fileList:[]}),a.getProcess()}).catch(function(e){O.a.error(e.message),a.setState({uploading:!1,viewNoty:"error"})})}).catch(function(e){O.a.error(e.message)})}else a.setState({showError:!0})})},a.handleChange=function(e){var t=null,n=[];a.state.engines.forEach(function(n){n.name===e.toLowerCase()&&(a.setState({selected:n}),t=n)}),t&&t.engines&&t.engines.length&&(t.engines.forEach(function(e){for(var t=!1,a=0;a<n.length;a++)if(n[a].key===e.source){t=!0;break}if(!t){var r=e.source;n.push({key:r,id:e.id,name:B.a.languages[r],target:e.target,source:e.source})}}),n.length&&a.setState({defaultSourceValue:n[0].name,source:n[0].source,target:"".concat(n[0].id,"-").concat(n[0].target),defaultTargetValue:a.getTargets(t.engines,n[0].source)[0].name}))},a.initSelected=function(e,t){for(var n=null,r=[],s=Object(m.a)(a),c=0;c<t.length;c++)if(t[c].name===e){s.setState({selected:t[c]}),n=t[c];break}n&&n.engines&&n.engines.length&&(n.engines.forEach(function(e){for(var t=!1,a=0;a<r.length;a++)if(r[a].key===e.source){t=!0;break}if(!t){var n=e.source;r.push({key:n,id:e.id,name:B.a.languages[n],target:e.target,source:e.source})}}),r.length&&a.setState({defaultSourceValue:r[0].name,source:r[0].source,target:"".concat(r[0].id,"-").concat(r[0].target),defaultTargetValue:a.getTargets(n.engines,r[0].source)[0].text}))},a.changeSource=function(e){a.setState({source:e})},a.changeTarget=function(e){a.setState({target:e})},a.getSources=function(){var e=a.state.selected,t=[];return e.engines&&e.engines.length&&e.engines.forEach(function(e){for(var a=!1,n=0;n<t.length;n++)if(t[n].key===e.source){a=!0;break}if(!a){var r=e.source;t.push({key:r,name:B.a.languages[r]})}}),t},a.getTargets=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=a.state,r=n.selected,s=n.source;e||(e=r.engines),t||(t=s);var c=[];return e.forEach(function(e){for(var a=!1,n=0;n<c.length;n++)if(c[n].key===e.target){a=!0;break}t&&(a||e.source!==t||(e.domain?(e.key="".concat(e.id,"-").concat(e.target),e.text="".concat(B.a.languages[e.target]," - ").concat(e.name," - ").concat(e.domain)):(e.key="".concat(e.id,"-").concat(e.target),e.text="".concat(B.a.languages[e.target]," - ").concat(e.name)),c.push(e)))}),c},a.renderForms=function(){var e=a.props.intl.messages,t=a.state,n=t.allowedFiles,s=t.engines,c=t.loading,o=t.fileList,l=t.showError,i=t.defaultValue,u=t.source,p=t.processEnd,d=t.defaultSourceValue,g=t.defaultTargetValue,m=t.selected,f=t.uploading,h=t.target,v=a.props.form,b=v.getFieldDecorator,y=v.getFieldsError,E={beforeUpload:function(t){var a=t.size/1024/1024<500;return B.a.checkFile(t,n)?a||O.a.error(e.process.error.uploadTwo):O.a.error(e.process.error.uploadOne.replace("allowedFiles",n)),!1},onChange:function(e){var t=[];e.fileList.map(function(e){return B.a.checkFile(e,n)&&t.push(e),t}),a.setState({fileList:t})},multiple:!1,fileList:o,showUploadList:!0},w=[];return s.length&&(w=s.map(function(e){return r.a.createElement(W,{key:e.id,value:e.name.replace(/^\w/,function(e){return e.toUpperCase()})},e.name.replace(/^\w/,function(e){return e.toUpperCase()}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:a.handleSubmit}),r.a.createElement(F.a,{type:"flex",justify:"center",align:"middle"},r.a.createElement(V.a,{xs:24},r.a.createElement(X,{wrapperCol:{xs:{span:24,offset:0},sm:{span:24,offset:0}}},r.a.createElement(Y,{error:l&&!o.length},r.a.createElement(N.a,{style:{cursor:"pointer"},count:o.length},r.a.createElement(K,E,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(C.a,{type:"inbox"})),r.a.createElement("p",{className:"ant-upload-text"},e.process.drag))),l&&!o.length?O.a.error(e.process.alert):null))),r.a.createElement(V.a,{xs:24},r.a.createElement(X,{validateStatus:c?"validating":"",label:e.process.process,hasFeedback:!0},b("process",{initialValue:i,disabled:null===u||p,rules:[{required:!0,message:e.process.rules.process.required}]})(r.a.createElement(k.a,{autofocus:"true",onChange:a.handleChange},w)))),r.a.createElement(V.a,{xs:24},r.a.createElement(X,{label:e.process.source,hasFeedback:!0},b("source",{initialValue:d,rules:[{required:!0,message:e.process.rules.source.required}]})(r.a.createElement(k.a,{disabled:!a.getSources().length,onChange:a.changeSource},a.getSources().map(function(e){return r.a.createElement(W,{key:e.key},e.name)})))),r.a.createElement(X,{label:e.process.target,hasFeedback:!0},b("target",{initialValue:g,rules:[{required:!0,message:e.process.rules.target.required}]})(r.a.createElement(k.a,{onChange:a.changeTarget,disabled:null===u||p},a.getTargets().map(function(e){return r.a.createElement(W,{key:e.key,value:e.key},e.text)})))),r.a.createElement(X,{label:e.process.notification,hasFeedback:!0,help:e.process.notificationHelp},b("email",{disabled:p,rules:[{type:"email",message:e.process.rules.email.type},{required:!0,message:e.process.rules.email.required}]})(r.a.createElement(T.a,{disabled:!m.engines.length})))),r.a.createElement(V.a,{xs:24},r.a.createElement(X,{style:{display:"flex",justifyContent:"center",marginBottom:0}},p?null:r.a.createElement(F.a,{justify:"center",type:"flex"},r.a.createElement(L.a,{style:{marginTop:10},icon:"upload",type:"primary",htmlType:"submit",size:"large",loading:f,disabled:!a.getSources().length||!h||!u||!a.props.form.getFieldValue("email")||!a.props.form.getFieldValue("email").length||B.a.hasErrors(y())},f?e.process.uploading:e.process.uploadingLoad)))))))},a.showListFile=function(){a.state.fileList.length&&a.setState({visible:!0})},a.hideListFile=function(){a.setState({visible:!1})},a.setViewNoty=function(e){a.setState({viewNoty:e})},a.onRemove=function(e){var t=a.state,n=t.processEnd,r=t.fileList;if(!n){var s=[];r.map(function(t){return t.uid!==e.uid&&s.push(t),s}),s.length||a.hideListFile(),a.setState({fileList:s})}},a.onRadioChange=function(e){a.setState({showBilling:e.target.value})},a.pay=function(){var e=Object(i.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({loadingPay:t}),document.getElementById(t).submit();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.calculatePrice=function(e){var t=a.state.applyTax,n=e.toFixed(2);if("0.00"===n&&(n="0.01"),t){var r=(21*parseFloat(n)/100).toFixed(2);n=parseFloat(n)+parseFloat(r)}return n},a.handleChange=function(e){var t=a.state.formValues;t.country=e,a.setState({formValues:t})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"next",value:function(){var e=this;if(1===this.state.current){this.props.form.validateFields(function(t,a){if(!t){var n=e.state.current+1;G[a.country].continent,a.continent=G[a.country].continent,e.setState({current:n,formValues:a,applyTax:!0})}})}else{var t=1;0===this.state.current&&"2"===this.state.showBilling&&(t=2);var a=this.state.current+t;this.setState({current:a})}}},{key:"prev",value:function(){var e=1;2===this.state.current&&"2"===this.state.showBilling&&(e=2);var t=this.state.current-e;this.setState({current:t})}},{key:"render",value:function(){var e=this,t=this.props.intl.messages,a=this.state.viewNoty;return"process"===a?this.renderForms():"error"===a?r.a.createElement("div",{style:{justifyContent:"center"},className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-sm-8 col-8 p-4"},r.a.createElement(ee,{src:"".concat("","/images/undraw_bug_fixing_oc7a.svg"),loading:function(){return r.a.createElement("div",null,t.process.loading,"...")},error:function(){return r.a.createElement("div",null,"Error")}}),r.a.createElement("h2",null,t.process.errorProcess),r.a.createElement("p",null,t.process.errorProcessSub),r.a.createElement(P.a,null),r.a.createElement($,null,r.a.createElement(L.a,{onClick:function(){e.setViewNoty("process")},type:"primary",size:"large"},t.process.tryAgain)))):"success"===a?r.a.createElement("div",{style:{justifyContent:"center"},className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-sm-8 col-8 p-4"},r.a.createElement(ee,{src:"".concat("","/images/undraw_confirmation_2uy0.svg"),loading:function(){return r.a.createElement("div",null,r.a.createElement(Z,null))},error:function(){return r.a.createElement("div",null,"Error")}}),r.a.createElement("h2",null,r.a.createElement(q.a,{size:"large"})," \xa0 ",t.process.processing))):void 0}}]),t}(r.a.Component);var ne=Object(v.c)(function(e){return{process:e.rootReducer.process}},function(e){return{processAct:Object(b.a)(_,e)}})(j.a.create()(Object(c.c)(Object(x.g)(ae)))),re=function(e){var t=e.selectProcess,a=e.process,n=e.changeFileID;return r.a.createElement(ne,{changeFileID:n,process:a,selectProcess:function(e){t(e)}})};t.default=Object(c.c)(function(e){var t=e.intl.messages;return r.a.createElement(s.a,{type:"bottom",className:"ui-animate"},r.a.createElement("div",{key:"1",className:"row justify-content-md-center"},r.a.createElement("div",{className:"form-card__body col-md-6 p-4"},r.a.createElement("article",{className:"article"},r.a.createElement("div",{className:"box box-default"},r.a.createElement("div",{className:"box-body p-4"},r.a.createElement("section",{className:"form-v1-container"},r.a.createElement("h2",null," ",t.process.processAFile),r.a.createElement("p",{className:"lead col-lg-10 mx-lg-auto"},t.process.subProcessAFile),r.a.createElement("p",null,"(docx | xlsx | pptx | pdf | odt | odp)"),r.a.createElement(re,null))))))))})}}]);
//# sourceMappingURL=31.7ced205c.chunk.js.map